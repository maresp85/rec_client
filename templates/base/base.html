{% load static %}

<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Tarjeta Digital</title>
		<meta name="description" content="Tarjeta Digital - Gestión de créditos">

		<link rel="icon" type="image/svg+xml" href="{% static 'images/favicon.svg' %}">

		<!-- Google Fonts -->
		<link href="https://fonts.gstatic.com" rel="preconnect">
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

		<!-- Vendor CSS -->
		<link href="{% static 'bootstrap-5/css/bootstrap.min.css' %}" rel="stylesheet">
		<link href="{% static 'bootstrap-icons-5/bootstrap-icons.css' %}" rel="stylesheet">

		<!-- Custom CSS -->
		<link href="{% static 'css/custom.css' %}" rel="stylesheet" type="text/css">
	</head>

	<body class="d-flex flex-column min-vh-100">

		<!-- Navbar -->
		<nav class="navbar navbar-expand-lg td-navbar">
			<div class="container">
				<a class="navbar-brand" href="{% url 'credit' %}">
					<svg width="32" height="32" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
						<rect width="64" height="64" rx="12" fill="rgba(255,255,255,0.15)"/>
						<text x="32" y="44" font-family="Arial, sans-serif" font-size="30" font-weight="bold" fill="#ffffff" text-anchor="middle">TD</text>
					</svg>
					<span>Tarjeta Digital</span>
				</a>

				<div class="d-flex align-items-center ms-auto">
					<!-- User Avatar Dropdown -->
					<div class="dropdown">
						<button
							class="td-avatar-btn dropdown-toggle"
							type="button"
							id="userAvatarDropdown"
							data-bs-toggle="dropdown"
							aria-expanded="false"
							aria-label="Menú de usuario"
							style="caret-color: transparent;"
						>
							{{ user.first_name|default:"U"|make_list|first }}
						</button>
						<ul class="dropdown-menu dropdown-menu-end td-avatar-dropdown" aria-labelledby="userAvatarDropdown">
							<li>
								<span class="dropdown-header">
									<i class="bi bi-person-circle"></i>
									{{ user.full_name|default:"Usuario" }}
								</span>
							</li>
							<li><hr class="dropdown-divider"></li>
							<li>
								<a class="dropdown-item" href="{% url 'logout' %}">
									<i class="bi bi-box-arrow-right text-danger"></i>
									Cerrar Sesión
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</nav>

		<!-- Content -->
		<div class="container flex-grow-1 py-4">
			{% block content %}
			{% endblock %}
		</div>

		<!-- Footer -->
		<footer class="td-footer mt-auto">
			<div class="container">
				<div class="d-flex flex-column flex-md-row align-items-center justify-content-between gap-2">
					<div class="d-flex align-items-center gap-2">
						<svg width="24" height="24" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
							<rect width="64" height="64" rx="12" fill="rgba(255,255,255,0.15)"/>
							<text x="32" y="44" font-family="Arial, sans-serif" font-size="30" font-weight="bold" fill="#ffffff" text-anchor="middle">TD</text>
						</svg>
						<span class="td-footer-brand">Tarjeta Digital</span>
						<span class="td-footer-divider mx-2">|</span>
						<span>digitalrec.info</span>
					</div>
					<div class="text-center text-md-end" style="font-size:0.8rem; opacity:0.7;">
						&copy; {% now "Y" %} Tarjeta Digital. Todos los derechos reservados.
					</div>
				</div>
			</div>
		</footer>

		<script src="{% static 'bootstrap-5/js/bootstrap.bundle.min.js' %}" type="text/javascript"></script>
		<script src="{% static 'js/main.js' %}" type="text/javascript"></script>

		{% block js %}{% endblock %}

		{% include 'base/_messages.html' %}

		<!-- Hide caret on avatar dropdown -->
		<style>.td-avatar-btn.dropdown-toggle::after { display: none; }</style>

	</body>
</html>
